USE ROLE ACCOUNTADMIN;
CREATE NOTIFICATION INTEGRATION IF NOT EXISTS alert_email_integration TYPE = EMAIL ENABLED = true, DEFAULT_SUBJECT = 'Snowflake Alert: EDW Core Account', COMMENT = 'Notification integration used for email alerts', DEFAULT_RECIPIENTS = ('msinghallearn6@gmail.com');
USE ROLE ACCOUNTADMIN;
CREATE NOTIFICATION INTEGRATION IF NOT EXISTS OP_MGMT_TASK_NOTIFICATION TYPE = QUEUE, NOTIFICATION_PROVIDER = AWS_SNS ENABLED = true, DIRECTION = 'OUTBOUND', AWS_SNS_TOPIC_ARN = 'arn:aws:sns:us-east-1:728901465415:AVTR-DCDET-Notification', AWS_SNS_ROLE_ARN = 'arn:aws:iam::728901465415:role/AVTR-Dev-DCDET-Op-Mgmt-SNS-Role';
USE ROLE SECURITYADMIN;
GRANT usage ON integration alert_email_integration TO ROLE FR_OPERATION;
USE ROLE SECURITYADMIN;
GRANT usage ON integration OP_MGMT_TASK_NOTIFICATION TO ROLE FR_OPERATION;
USE ROLE ACCOUNTADMIN;
ALTER ROLE IF EXISTS AD_GRP_FR_OPERATION_TEST SET TAG AVTR_DB_OP_MGMT.COST_CENTER_TAG.TEST_ACCESS = 'BU1';
